import{r as l,_ as x,R as C,c as g,P as n,u as S,j as e,C as E,o as I,q as L}from"./index-D7dChUq5.js";import{d as R,e as T,g as y,h as G,b as P}from"./cil-user-BDats7ul.js";import{C as N,a as v,b as z,c as O}from"./CRow-DWDH-8Cv.js";import{C as V,a as b}from"./CFormInput-BuL8esE9.js";const j=l.forwardRef((s,a)=>{var{children:o,className:r}=s,t=x(s,["children","className"]);return C.createElement("div",Object.assign({className:g("card-group",r)},t,{ref:a}),o)});j.propTypes={children:n.node,className:n.string};j.displayName="CCardGroup";const p=l.forwardRef((s,a)=>{var{children:o,className:r,size:t}=s,i=x(s,["children","className","size"]);return C.createElement("div",Object.assign({className:g("input-group",{[`input-group-${t}`]:t},r)},i,{ref:a}),o)});p.propTypes={children:n.node,className:n.string,size:n.oneOf(["sm","lg"])};p.displayName="CInputGroup";const u=l.forwardRef((s,a)=>{var{children:o,as:r="span",className:t}=s,i=x(s,["children","as","className"]);return C.createElement(r,Object.assign({className:g("input-group-text",t)},i,{ref:a}),o)});u.propTypes={as:n.elementType,children:n.node,className:n.string};u.displayName="CInputGroupText";var k=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M384,200V144a128,128,0,0,0-256,0v56H88V328c0,92.635,75.364,168,168,168s168-75.365,168-168V200ZM160,144a96,96,0,0,1,192,0v56H160ZM392,328c0,74.99-61.01,136-136,136s-136-61.01-136-136V232H392Z' class='ci-primary'/>"];const F=()=>{const s=S(),[a,o]=l.useState(""),[r,t]=l.useState(""),[i,h]=l.useState(!1),[f,c]=l.useState(""),w=async d=>{if(d.preventDefault(),c(""),!a||!r){c("Please enter email and password.");return}h(!0);try{const m=await I({emailid:a,password:r});if(m.code===0&&m.data){if(m.data.roleid!==1){c("Unauthorized access"),h(!1);return}L(m.data,a),s("/dashboard")}else c(m.message||"Invalid email or password.")}catch{c("Network error. Please try again.")}finally{h(!1)}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(R,{children:e.jsx(N,{className:"justify-content-center",children:e.jsx(v,{md:6,lg:5,children:e.jsx(j,{children:e.jsx(z,{className:"p-4",children:e.jsx(O,{children:e.jsxs(V,{onSubmit:w,children:[e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),f&&e.jsx(T,{color:"danger",children:f}),e.jsxs(p,{className:"mb-3",children:[e.jsx(u,{children:e.jsx(y,{icon:G})}),e.jsx(b,{type:"email",placeholder:"Email",autoComplete:"email",value:a,onChange:d=>o(d.target.value)})]}),e.jsxs(p,{className:"mb-4",children:[e.jsx(u,{children:e.jsx(y,{icon:k})}),e.jsx(b,{type:"password",placeholder:"Password",autoComplete:"current-password",value:r,onChange:d=>t(d.target.value)})]}),e.jsx(N,{children:e.jsx(v,{xs:6,children:e.jsx(P,{color:"primary",className:"px-4",type:"submit",disabled:i,children:i?e.jsx(E,{size:"sm"}):"Login"})})})]})})})})})})})})};export{F as default};
