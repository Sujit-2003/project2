import{u,r as x,j as e,C,z as g}from"./index-D7dChUq5.js";import{b as p,g as f,e as b}from"./cil-user-BDats7ul.js";import{g as y}from"./patientService-JLxvJsJ4.js";import{C as N,a as w,b as P,c as _}from"./CRow-DWDH-8Cv.js";import{C as A}from"./CCardHeader-BiU4jNSZ.js";import{c as D,e as T}from"./DefaultLayout-BaWbCX8L.js";import{C as v,a as B,b as m,c as a,d as S,e as t}from"./CTable-BvAFdtBr.js";function E(c){if(!c)return"";const r=new Date(c),n=new Date;let i=n.getFullYear()-r.getFullYear();const l=n.getMonth()-r.getMonth();return(l<0||l===0&&n.getDate()<r.getDate())&&i--,i}const Y=()=>{const c=u(),[r,n]=x.useState([]),[i,l]=x.useState(!0),[h,j]=x.useState("");return x.useEffect(()=>{(async()=>{l(!0),j("");try{const o=g(),d=await y(o);d.code===0?n(Array.isArray(d.data)?d.data:[]):j(d.message||"Failed to load patients.")}catch{j("Network error loading patients.")}finally{l(!1)}})()},[]),e.jsx(N,{children:e.jsx(w,{xs:12,children:e.jsxs(P,{className:"mb-4",children:[e.jsxs(A,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("strong",{children:"Patients"}),e.jsxs(p,{color:"primary",size:"sm",onClick:()=>c("/patients/add"),children:[e.jsx(f,{icon:D,className:"me-1"}),"Add Patient"]})]}),e.jsxs(_,{children:[i&&e.jsx("div",{className:"text-center py-4",children:e.jsx(C,{color:"primary"})}),h&&e.jsx(b,{color:"danger",children:h}),!i&&!h&&e.jsxs(v,{hover:!0,responsive:!0,children:[e.jsx(B,{children:e.jsxs(m,{children:[e.jsx(a,{children:"#"}),e.jsx(a,{children:"Name"}),e.jsx(a,{children:"Relationship"}),e.jsx(a,{children:"DOB"}),e.jsx(a,{children:"Age"}),e.jsx(a,{children:"Gender"}),e.jsx(a,{children:"Contact"})]})}),e.jsx(S,{children:r.length===0?e.jsx(m,{children:e.jsx(t,{colSpan:7,className:"text-center text-muted",children:"No patients found."})}):r.map((s,o)=>e.jsxs(m,{children:[e.jsx(t,{children:o+1}),e.jsxs(t,{children:[s.patient_fname," ",s.patient_lname]}),e.jsx(t,{children:s.p_relationship}),e.jsx(t,{children:s.p_dob?.split(" ")[0]}),e.jsx(t,{children:E(s.p_dob)}),e.jsx(t,{children:e.jsx(T,{color:s.user_gender==="Male"?"info":"warning",children:s.user_gender})}),e.jsx(t,{children:s.contact_number})]},s.id||o))})]})]})]})})})};export{Y as default};
